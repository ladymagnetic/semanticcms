!function e(t,n,r){function o(s,i){if(!n[s]){if(!t[s]){var d="function"==typeof require&&require;if(!i&&d)return d(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e){!function(t){"use strict";function n(t,n){var r=this.options=n;this.debugOn=n.debugOn&&window.console,r.UI.docInfo&&(this.docInfo=r.UI.docInfo);var a;a=r.connection.endpoint?r.connection:{endpoint:r.connection["http:"].endpoint,defaultParams:r.endpoints.all,headers:{Accept:r.connection["http:"].accepts},jsonp:r.endpoints.jsonp};var s=e("../../src/http-client.js"),i=e("../../src/sparql-client.js");this.sparqlClient=i.create(s,{connection:a,queries:r.queries||r.connection["http:"].sparql});var d,c=e("../../src/renderer.js");d=r.UI.arrows?r.UI:{arrows:r.arrows,tools:r.UI.tools,nodeIcons:r.UI.nodeIcons,relationships:r.UI.relationships,hashFunc:r.hashFunc},this.renderer=c.create(d),this.refs=this.renderer.refs,this.renderer.boxTemplate=this.boxTemplate=r.boxTemplate||o,r.UI.nodeHover&&(this.renderer.msg=r.UI.nodeHover),this.renderer.init(this,t),this.container=this.renderer.container,this.context=this.renderer.context}var r=(t(window),t(document.body),e("../../src/utils.js")),o='<div class="boxWrapper lodlive-node defaultBoxTemplate"><div class="ll-node-anchor"></div><div class="lodlive-node-label box sprite"></div></div>';n.prototype.init=function(e){this.imagesMap={},this.mapsMap={},this.infoPanelMap={},this.connection={},this.ignoreBnodes=this.options.UI.ignoreBnodes,this.doInverse=!0,this.doAutoExpand=!0,this.doAutoSameas=!0,this.doCollectImages=!1,this.doDrawMap=!1,this.classMap={counter:Math.floor(13*Math.random())+1};var t=this.renderer.firstBox(e);this.openDoc(e,t),this.renderer.msg("","init")},n.prototype.autoExpand=function(){var e=this;e.context.find(".relatedBox:not([class*=exploded])").each(function(){var n=t(this),r=n.attr("relmd5");e.context.children("#"+r).length&&n.click()})},n.prototype.addNewDoc=function(e,n){var o=this,a=!0,s=null,i=n.attr("rel"),d=n.attr("relmd5"),c=n.data("circleid"),l=n.data("property"),p=n.is(".inverse");if(!p){if(o.refs.getObjectRefs(c).indexOf(d)>-1)return;o.refs.addObjectRef(c,d),o.refs.addSubjectRef(d,c)}var u=o.context.find("#"+d);if(u.length||(a=!1,u=t(o.boxTemplate).attr("id",d).attr("rel",i)),n.hide(),!a){var f=parseInt(n.attr("data-circlePos"),10),h=parseInt(n.attr("data-circleParts"),10),v=h>10?2+f%2:2.5,g=r.circleChords(e.width()*v,h,e.position().left+e.width()/2,e.position().top+e.height()/2,null,f);o.context.append(u),u.css({left:g[0][0]-u.height()/2,top:g[0][1]-u.width()/2,opacity:1,zIndex:99}),p&&(s=o.context.find('div[data-property="'+l+'"][rel="'+i+'"]')),o.openDoc(i,u,s)}p||o.renderer.drawLine(e,u,null,l)},n.prototype.removeDoc=function(e){var n=this,r=1==n.context.find(".lodlive-node").length;if(r)return void alert("Cannot Remove Only Box");n.context.find(".lodlive-toolbox").remove();var o=e.attr("id");n.renderer.clearLines(o);var a=n.refs.getSubjectRefs(o),s=n.refs.getObjectRefs(o);a.forEach(function(e){n.refs.removeObjectRef(e,o)}),s.forEach(function(e){n.refs.removeSubjectRef(e,o)});var i=n.renderer.getRelatedNodePairs(o,!0);n.renderer.drawLines(i),n.refs.removeAsSubject(o),n.refs.removeAsObject(o),n.docInfo(),e.fadeOut("normal",null,function(){e.remove(),n.context.find("div[relmd5="+o+"]").each(function(){var e=t(this);e.show(),e.removeClass("exploded")})})},n.prototype.docInfo=function(e){var n,r=this,o=r.container.find(".lodlive-docinfo");return null==e||(n=e.attr("rel"))&&o.is('[rel="'+n+'"]')?(console.log("hiding docInfo"),void o.fadeOut("fast").removeAttr("rel")):(o.length||(o=t('<div class="lodlive-docinfo" rel="'+n+'"></div>'),r.container.append(o)),o.attr("rel",n),void r.sparqlClient.document(n,{success:function(e){o.empty().fadeIn(),r.formatDoc(o,e.values,e.uris,e.bnodes,n)},error:function(){var e=[{"http://system/msg":"Could not find document: "+n}];r.formatDoc(o,e,[],[],n)}}))},n.prototype.formatDoc=function(e,t,n,r,o){var a=this,s=a.getJsonValue(n,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","default");if(e.addClass(a.getProperty("document","className",s)),!t.length&&!r.length)return e.append(a.renderer.docInfoMissing());{var i=a.getProperty("images","properties",s),d=a.getProperty("weblinks","properties",s);a.getProperty("document","propertiesMapper",o.replace(/(http:\/\/[^\/]+\/).+/,"$1"))}Array.isArray(i)||(i=[i]),Array.isArray(d)||(d=[d]);var c=[],l=[],p=[];n.forEach(function(e){var t=Object.keys(e)[0],n=e[t],r={};"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==t?(r[t]=n,i.indexOf(t)>-1?c.push(r):d.indexOf(t)>-1&&l.push(r)):p.push(n)}),e.append(a.renderer.docInfoTypes(p)),e.append(a.renderer.docInfoImages(c)),e.append(a.renderer.docInfoLinks(l)),e.append(a.renderer.docInfoValues(t));var u=a.renderer.docInfoBnodes(r);u.forEach(function(t){e.append(t.bnodeNode),a.resolveBnodes(t.value,o,t.spanNode,e)})},n.prototype.resolveBnodes=function(e,t,n,r){var o=this;o.sparqlClient.bnode(e,{beforeSend:function(){return o.renderer.loading(n)},success:function(e){e.values.length&&o.renderer.docInfoBnodeValues(e.values,n),e.bnodes.forEach(function(e){var a=Object.keys(e)[0],s=e[s],i=o.renderer.docInfoNestedBnodes(a,n);o.resolveBnodes(s,t,i,r)})},error:function(){}})},n.prototype.getJsonValue=function(e,n,r){var o,a=this;a.debugOn&&(o=(new Date).getTime());var s=[];return t.each(e,function(e,t){for(var r in t)r==n&&s.push(t[r])}),s==[]&&(s=[r]),a.debugOn&&console.debug((new Date).getTime()-o+"  getJsonValue"),s},n.prototype.getProperty=function(e,t,n){var r,o=this,a=o.options;if(o.debugOn&&(r=(new Date).getTime()),Array.isArray(n)){for(var s=0;s<n.length;s++)if(a[n[s]]&&a[n[s]][e])return t?a[n[s]][e][t]?a[n[s]][e][t]:a["default"][e][t]:a[n[s]][e]?a[n[s]][e]:a["default"][e]}else if(n+="",a[n]&&a[n][e])return t?a[n][e][t]?a[n][e][t]:a["default"][e][t]:a[n][e]?a[n][e]:a["default"][e];return o.debugOn&&console.debug((new Date).getTime()-r+"  getProperty"),a["default"][e]?t?a["default"][e][t]:a["default"][e]:""},n.prototype.format=function(e,n,o,a){function s(e,t){var n={},r=[];return e.forEach(function(e){var o,a,s,i=Object.keys(e)[0],d=e[i],c={};"uris"===t&&m.indexOf(i)>-1||"inverses"===t&&"bnode"==h&&d.indexOf("~~")>-1||(n.hasOwnProperty(d)?(s=n[d],a=Object.keys(r[s])[0],o=a+" | "+i,c[o]=d,r[s]=c):(r.push(e),n[d]=r.length-1))}),r}function i(e){var t={};return e.forEach(function(e){var n=Object.keys(e)[0],r=e[n];t.hasOwnProperty(n)?t[n].push(r):t[n]=[r]}),t}{var d,c=this,l=c.classMap;c.options}c.debugOn&&(d=(new Date).getTime());var p=e.parent("div"),u=p.find(".ll-node-anchor"),f=p.attr("rel")||"",h=c.getJsonValue(o,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","default");-1!=f.indexOf("~~")&&(h="bnode");var v=c.getProperty("document","className",h);"bnode"==h&&(v="bnode"),(null==v||"standard"==v||""==v)&&(l[h]?v=l[h]:(v="box"+l.counter,13===l.counter?l.counter=1:l.counter+=1,l[h]=v)),p.addClass(v);var g=c.getProperty("document","titleProperties",h),y=c.getProperty("images","properties",h),m=c.getProperty("weblinks","properties",h),x=c.getProperty("maps","lats",h),b=c.getProperty("maps","longs",h),w=c.getProperty("maps","points",h);"string"==typeof g&&(g=[g]),"string"==typeof y&&(y=[y]),"string"==typeof m&&(m=[m]),"string"==typeof x&&(x=[x]),"string"==typeof b&&(b=[b]),"string"==typeof w&&(w=[w]),g.push("http://system/msg");var I=[];g.forEach(function(e){var r;0!==e.indexOf("http")?I.push(t.trim(e)):(r=c.getJsonValue(n,e,0===e.indexOf("http")?"":e),r.forEach(function(e){I.push(e)}))});var C=I.filter(function(e,t,n){return n.indexOf(e)===t}).join("\n");if(0==o.length&&0==n.length)C=r.lang("resourceMissing");else if(C||"bnode"!==h){if(!C){C="(Error)";try{C=c.options["default"].document.titleName[f]}catch(j){C=c.options["default"].document.titleProperties[f]}}}else C="[blank node]";c.renderer.addBoxTitle(C,f,e,p);var S=[],O=[],$={},k={};S=s(o,"uris"),a&&(O=s(a,"inverses")),$=i(S),k=i(O);var L=r.circleChords(75,24,e.position().left+65,e.position().top+65),E=r.circleChords(95,36,e.position().left+65,e.position().top+65),R=c.renderer.createPropertyBoxes(S,$,p,L,E,!1),M=c.renderer.createPropertyBoxes(O,k,p,L,E,!0),T=R.objectList.concat(M.objectList),P=R.innerObjectList.concat(M.innerObjectList);c.renderer.paginateRelatedBoxes(p,T,P,L),c.renderer.generateNodeIcons(u)},n.prototype.openDoc=function(e,n,r){function o(e){a.format(n.children(".box"),e.values,e.uris,i),r&&r.length&&t(r).click(),a.doAutoExpand&&a.autoExpand(n)}var a=this,s=a.options;e||t.error("LodLive: no uri for openDoc"),n.attr("data-endpoint",s.connection["http:"].endpoint);var i=[];a.sparqlClient.documentUri(e,{beforeSend:function(){return a.renderer.loading(n.children(".box"))},success:function(t){return t.bnodes.forEach(function(n){var r=Object.keys(n),o={};r.forEach(function(t){o[t]=e+"~~"+n[t]}),t.uris.push(o)}),delete t.bnodes,a.doInverse?void a.sparqlClient.inverse(e,{beforeSend:function(){return a.renderer.loading(n.children(".box"))},success:function(n){i=n.uris.concat(n.values),n.bnodes.forEach(function(t){var n=Object.keys(t),r={};n.forEach(function(n){r[n]=e+"~~"+t[n]}),i.push(r)}),a.doAutoSameas?a.findInverseSameAs(e,i,function(){o(t)}):o(t)},error:function(){o(t)}}):o(t)},error:function(){a.renderer.errorBox(n)}})},n.prototype.findInverseSameAs=function(e,n,r){var o=this;if(!o.options.connection["http:"].useForInverseSameAs)return setTimeout(function(){r()},0);var a;o.debugOn&&(a=(new Date).getTime()),o.sparqlClient.inverseSameAs(e,{success:function(e){e=e.results.bindings,t.each(e,function(e,t){var r={},e=t.property&&t.property.value||"http://www.w3.org/2002/07/owl#sameAs";r[e]=t.object.value,n.splice(1,0,r)}),r()},error:function(){r()}}),o.debugOn&&console.debug((new Date).getTime()-a+"  findInverseSameAs")},window.LodLive||(window.LodLive=n),jQuery.fn.lodlive=function(e){return arguments.length?("string"==typeof e&&(e={method:e}),this.each(function(){var r=t(this),o=r.data("lodlive-instance");e.method&&"init"!==e.method.toLowerCase()?n.prototype.hasOwnProperty(e.method)&&r.data("lodlive-instance")?o[e.method].apply(o,e.method.args||[]):jQuery.error("Method "+e.method+" does not exist on jQuery.lodlive"):(o=new n(r,e.profile),r.data("lodlive-instance",o),o.init(e.firstUri))})):this.data("lodlive-instance")}}(jQuery)},{"../../src/http-client.js":3,"../../src/renderer.js":5,"../../src/sparql-client.js":6,"../../src/utils.js":7}],2:[function(e,t){"use strict";function n(e,t,n,r){function o(){d&&d(),d=null,i.isDragging=!1,i.target=null,i.panning=!1}var a=$(window),s=t.parent(),i={},d=null;e.on("mousemove",function(e){var t=e.clientX,n=e.clientY,o=i.lastx,c=i.lasty;i.lastx=t,i.lasty=n,i.target?(i.isDragging||(i.isDragging=!0,d=r(i),i.scrollX=s.scrollLeft()+a.scrollLeft()-s.offset().left-i.offsetX,i.scrollY=s.scrollTop()+a.scrollTop()-s.offset().top-i.offsetY),requestAnimationFrame(function(){i.target&&i.target.css({left:t+i.scrollX,top:n+i.scrollY})})):i.panning&&requestAnimationFrame(function(){s.scrollLeft(s.scrollLeft()+o-t),s.scrollTop(s.scrollTop()+c-n)})}),e.on("mousedown",n,function(e){i.target=$(this),i.panning=!1,i.offsetX=e.offsetX,i.offsetY=e.offsetY,e.stopPropagation(),e.preventDefault()}),e.on("mousedown",function(e){i.target=null,i.panning=!0,e.stopPropagation(),e.preventDefault()}),e.on("mouseup",o),$(document).on("keydown",function(e){27===e.keyCode&&o()})}t.exports=n},{}],3:[function(e,t){"use strict";var n={create:function(e){function t(t){return e.defaultParams?"object"==typeof e.defaultParams?$.param($.extend({},e.defaultParams,t)):e.defaultParams+"&"+$.param(t):$.param(t)}if(!e.endpoint)throw new Error("missing required connection.endpoint for httpClient");return function(n,r){var o,a=e.endpoint+"?"+t(n);$.ajax({url:a,contentType:"application/json",dataType:e.jsonp?"jsonp":"json",headers:e.headers||{},beforeSend:function(){r.beforeSend&&(o=r.beforeSend())},success:function(){o&&o(),r.success&&r.success.apply(null,arguments)},error:function(){o&&o(),r.error&&r.error.apply(null,arguments)}})}}};t.exports=n,window.httpClientFactory||(window.httpClientFactory=n)},{}],4:[function(e,t){"use strict";function n(){}n.prototype.getObjectRefs=function(e){return this.storeIds["gen"+e]||[]},n.prototype.setObjectRefs=function(e,t){this.storeIds["gen"+e]=t},n.prototype.addObjectRef=function(e,t){var n=this.getObjectRefs(e);-1===n.indexOf(t)&&n.push(t),this.setObjectRefs(e,n)},n.prototype.removeObjectRef=function(e,t){var n=this.getObjectRefs(e),r=n.indexOf(t);r>-1&&n.splice(r,1)},n.prototype.removeAsObject=function(e){delete this.storeIds["rev"+e]},n.prototype.getSubjectRefs=function(e){return this.storeIds["rev"+e]||[]},n.prototype.setSubjectRefs=function(e,t){this.storeIds["rev"+e]=t},n.prototype.addSubjectRef=function(e,t){var n=this.getSubjectRefs(e);-1===n.indexOf(t)&&n.push(t),this.setSubjectRefs(e,n)},n.prototype.removeSubjectRef=function(e,t){var n=this.getSubjectRefs(e),r=n.indexOf(t);r>-1&&n.splice(r,1)},n.prototype.removeAsSubject=function(e){delete this.storeIds["gen"+e]};var r={create:function(){var e=Object.create(n.prototype);return e.storeIds={},e}};t.exports=r,window.refStoreFactory||(window.refStoreFactory=r)},{}],5:[function(e,t){"use strict";function n(e){return this instanceof n?(this.refs=o.create(),this.hashFunc=e.hashFunc||r.hashFunc,this.arrows=e.arrows,this.tools=e.tools,this.nodeIcons=e.nodeIcons,void(this.relationships=e.relationships)):new n(e)}var r=e("./utils.js"),o=e("./ref-store.js"),a={docInfo:'<div class="actionBox docInfo" rel="docInfo"><span class="fa fa-list"></span></div>',tools:'<div class="actionBox tools" rel="tools"><span class="fa fa-cog"></span></div>'},s={expand:{title:"Expand all",icon:"fa fa-arrows-alt",handler:function(e){var t=0,n=e.find(".relatedBox:visible"),r=n.length,o=function(){var e=n.eq(t++);e.length&&e.click(),r>t&&window.setTimeout(o,120)};window.setTimeout(o,120)}},info:{title:"More info",icon:"fa fa-info-circle",handler:function(){}},rootNode:{title:"Make root node",icon:"fa fa-dot-circle-o",handler:function(e,t){t.context.empty(),t.init(e.attr("rel"))}},remove:{title:"Remove this node",icon:"fa fa-trash",handler:function(e,t){t.removeDoc(e)}},openPage:{title:"Open in another page",icon:"fa fa-external-link",handler:function(e){window.open(e.attr("rel"))}}};n.prototype.loading=function(e){var t=e.height()/2-8,n=$('<img class="loader" style="margin-top:'+t+'px" src="img/ajax-loader.gif"/>');return e.append(n),function(){n.remove()}},n.prototype.firstBox=function(e){var t=this,n=t.context,r=n.height(),o=n.width();n.parent().scrollTop(r/2-n.parent().height()/2+60),n.parent().scrollLeft(o/2-n.parent().width()/2+60);var a=(r-65)/2+(n.scrollTop()||0),s=(o-65)/2+(n.scrollLeft()||0),i=$(t.boxTemplate).attr("id",t.hashFunc(e)).attr("rel",e).css({left:s,top:a,opacity:0,zIndex:1}).animate({opacity:1},1e3);return t.context.append(i),i},n.prototype.generateNodeIcons=function(e){var t=this;t.nodeIcons.forEach(function(t){var n;t.builtin?n=jQuery(a[t.builtin]||'<span class="no such builtin"></span>'):(n=$('<div class="actionBox custom"></div>').data("action-handler",t.handler),$("<span></span>").addClass(t.icon).attr("title",t.title).appendTo(n)),n.appendTo(e)})},n.prototype.generateTools=function(e,t,n){var o=this,a=e.find(".lodlive-toolbox");if(!a.length){a=$('<div class="lodlive-toolbox"></div>').hide(),o.tools.forEach(function(e){if(e.builtin&&(e=s[e.builtin]),e){var o=$("<span></span>").addClass(e.icon);$("<div></div>").addClass("innerActionBox").attr("title",r.lang(e.title)).append(o).appendTo(a).on("click",function(){e.handler.call($(this),t,n)})}});var i=$('<div class="lodlive-toolbox-wrapper"></div>').append(a);e.append(i)}return a},n.prototype.reDrawLines=function(e){function t(){n.clearLines(a),n.drawLines(o),s&&requestAnimationFrame(t)}var n=this,r=e.attr("id"),o=n.getRelatedNodePairs(r);if(o&&o.length){var a=n.getRelatedCanvases(r),s=!0;return requestAnimationFrame(t),function(){s=!1}}},n.prototype.docInfoMissing=function(){var e=$('<div class="section"></div>'),t=$("<div></div>").text(r.lang("resourceMissingDoc")),n=$("<label></label>").attr("data-title",r.lang("resourceMissingDoc"));return e.append(n).append(t),e},n.prototype.docInfoTypes=function(e){if(!e.length)return null;var t=$('<label data-title="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">type</label>'),n=$("<div></div>");e.forEach(function(e){var t=$("<span></span>").attr("title",e).text(r.shortenKey(e)+" ");n.append(t)});var o=$('<div class="section"></div>').append(t).append(n);return o},n.prototype.docInfoImages=function(e){if(!e.length)return null;var t=$('<div class="section" style="height:80px"></div>');return e.forEach(function(e){var n=Object.keys(e)[0],o=e[n],a=$("<a></a>").attr("href",o),s=$("<img/>").attr("src",o);a.append(s),t.append(a),s.load(function(){var e=s.width(),t=s.height();e>t?(s.height(80*t/e),s.width(80)):(s.width(80*e/t),s.height(80))}),s.error(function(){s.attr("title",r.lang("noImage")+" \n"+s.attr("src"))})}),t},n.prototype.docInfoLinks=function(e){if(!e.length)return null;var t=$('<div class="section"></div>'),n=$('<ul style="padding:0;margin:0;display:block;overflow:hidden;tex-overflow:ellipses"></ul>');return e.forEach(function(e){var t=Object.keys(e)[0],r=e[t],o=$("<li></li>"),a=$('<a class="relatedLink" target="_blank"></a>').attr("data-title",t+" \n "+r).attr("href",r).text(r);o.append(a),n.append(o)}),t.append(n),t},n.prototype.docInfoValues=function(e){if(!e.length)return null;var t=$("<div></div>");return e.forEach(function(e){var n=Object.keys(e)[0],o=e[n],a=r.shortenKey(n),s=$('<div class="section"></div>'),i=$("<label></label>").attr("data-title",n).text(a),d=$("<div></div>").text(o);s.append(i).append(d),t.append(s)}),t},n.prototype.docInfoBnodes=function(e){return e.map(function(e){var t=Object.keys(e)[0],n=e[t],o=r.shortenKey(t),a=$('<div class="section"></div>'),s=$("<label></label>").attr("data-title",t).text(o),i=$('<span class="bnode"></span>');return a.append(s).append(i),{value:n,spanNode:i,bnodeNode:a}})},n.prototype.docInfoBnodeValues=function(e,t){t.attr("class",""),e.forEach(function(e){var n=Object.keys(e)[0],o=e[n],a=r.shortenKey(n),s=$("<em></em>").attr("title",n).text(a),i=$("<span></span>").text(": "+o),d=$("<div></div>").append(s).append(i);t.append(d)})},n.prototype.docInfoNestedBnodes=function(e,t){var n=$("<span></span>"),o=$("<label></label").attr("data-title",e).text(r.shortenKey(e)),a=$('<span class="bnode"></span>');return n.append(o).append(a),t.attr("class","").append(n),a},n.prototype.addBoxTitle=function(e,t,n){var o=$("<div></div>").addClass("boxTitle");if(e===r.lang("resourceMissing"))o.append('<a target="_blank" href="'+t+'">'+t+"</a>").append('<span class="spriteLegenda"></span>');else{e||(e=r.lang("noName"));var a=$('<span class="ellipsis_text"></span>');a.text(e),o.append(a)}o.attr("data-tooltip",e),n.append(o)},n.prototype.createPropertyBoxes=function(e,t,n,r,o,a){var s=this,i=1,d={},c=1,l=[],p=[];return e.forEach(function(e){15===i&&(i=1);var u=Object.keys(e)[0],f=null;if(t[u]&&t[u].length>1){if(!d[u]){c=1,d[u]=!0;var h=s.createPropertyGroup(u,t[u],r,i,a);l.push(h),i++}25>c&&(f=s.createGroupedRelatedBox(u,e[u],n,o,c,a),p.push(f)),c++}else f=s.createRelatedBox(u,e[u],n,r,i,a),l.push(f),i++}),{objectList:l,innerObjectList:p}},n.prototype.getRelationshipCSS=function(e){return this.relationships&&this.relationships[e]||{}},n.prototype.createPropertyGroup=function(e,t,n,o,a){var s=this,i=$("<div></div>").addClass("groupedRelatedBox").attr("rel",s.hashFunc(e).toString()).attr("data-property",e).attr("data-title",e+" \n "+t.length+" "+r.lang("connectedResources")).css(s.getRelationshipCSS(e)).css({top:n[o][1]-8+"px",left:n[o][0]-8+"px"});return a&&(i.addClass("inverse"),i.attr("rel",s.hashFunc(e).toString()+"-i")),t[0].indexOf("~~")>-1?i.addClass("isBnode"):e.split(" ").forEach(function(e){s.arrows[e]&&i.addClass(s.arrows[e])}),i},n.prototype.createGroupedRelatedBox=function(e,t,n,r,o,a){var s=this._createRelatedBox(e,t,n,a).addClass("aGrouped").attr("data-circlePos",o).attr("data-circleParts",36).css({display:"none",position:"absolute",top:r[o][1]-8+"px",left:r[o][0]-8+"px"});return s.addClass(a?this.hashFunc(e).toString()+"-i":this.hashFunc(e).toString()),s},n.prototype.createRelatedBox=function(e,t,n,r,o,a){return this._createRelatedBox(e,t,n,a).attr("data-circlePos",o).attr("data-circleParts",24).css({top:r[o][1]-8+"px",left:r[o][0]-8+"px"})},n.prototype._createRelatedBox=function(e,t,n,r){var o=this,a=$("<div></div>").addClass("relatedBox "+o.hashFunc(t).toString()).attr("rel",t).attr("relmd5",o.hashFunc(t).toString()).attr("data-title",e+" \n "+t).attr("data-circleid",n.attr("id")).attr("data-property",e).css(o.getRelationshipCSS(e));return r&&a.addClass("inverse"),t.indexOf("~~")>-1?a.addClass("isBnode"):e.split(" ").forEach(function(e){o.arrows[e]&&a.addClass(o.arrows[e])}),a},n.prototype.paginateRelatedBoxes=function(e,t,n,r){var o=0,a=r[0],s=r[15],i=t.length>14?t.length/14+(t.length%14>0?1:0):1;t.forEach(function(t,n){var r,d,c;n%14===0&&(o++,r=$("<div></div>").addClass("page page"+o).attr("style","display:none"),o>1&&i>1&&(d=$("<div></div>").addClass("llpages pagePrev").addClass("fa fa-arrow-left").attr("data-page","page"+(o-1)).attr("style","top:"+(a[1]-8)+"px;left:"+(a[0]-8)+"px"),r.append(d)),i>1&&i-1>o&&(c=$("<div></div>").addClass("llpages pageNext").addClass("fa fa-arrow-right").attr("data-page","page"+(o+1)).attr("style","top:"+(s[1]-8)+"px;left:"+(s[0]-8)+"px"),r.append(c)),e.append(r)),e.children(".page"+o).append(t)});var d=$('<div class="innerPage"></div>');n.forEach(function(e){d.append(e)}),n.length>0&&e.append(d),e.children(".page1").fadeIn("fast")},n.prototype.getRelatedCanvases=function(e){var t=[],n=this.refs.getSubjectRefs(e);return t.push($("#line-"+e)),n.forEach(function(e){t.push($("#line-"+e))}),t},n.prototype.clearLines=function(e){var t;t=Array.isArray(e)?e:this.getRelatedCanvases(e),t.forEach(function(e){e.clearCanvas()})},n.prototype.getRelatedNodePairs=function(e,t){var n,r,o=this,a=[],s=o.refs.getObjectRefs(e),i=o.refs.getSubjectRefs(e);return t||(n=o.context.find("#"+e),r=$("#line-"+e),s.forEach(function(e){a.push({from:n,to:o.context.find("#"+e),canvas:r})})),i.forEach(function(n){var r=o.refs.getObjectRefs(n),s=o.context.find("#"+n),i=o.context.find("#line-"+n);r.forEach(function(n){t&&n===e||a.push({from:s,to:o.context.find("#"+n),canvas:i})})}),a},n.prototype.drawLines=function(e){var t,n=this;t=Array.isArray(e)?e:n.getRelatedNodePairs(e),t.forEach(function(e){n.drawLine(e.from,e.to,e.canvas)})},n.prototype.drawLine=function(e,t,n,o){var a=this,s=e.position(),i=t.position(),d=e.attr("id"),c=t.attr("id");n||(n=$("#line-"+d)),n.length||(n=$("<canvas></canvas>").attr("height",a.context.height()).attr("width",a.context.width()).attr("id","line-"+d).css({position:"absolute",top:0,left:0,zIndex:"0"}),n.data().lines={},a.context.append(n)),o&&!n.data("propertyName-"+c)&&n.attr("data-propertyName-"+c,o),n.data().lines[c]||(n.data().lines[c]={});var l,p=n.data().lines[c],u=p.lineStyle||"standardLine",f=p.label;f||(l=n.attr("data-propertyName-"+c).split(/\|/),f=l.map(function(e){return e=$.trim(e),a.arrows[e]&&(u=a.arrows[e]+"Line"),r.shortenKey(e)}).filter(function(e,t,n){return n.indexOf(e)===t}).join(", "),p.label=f,p.lineStyle=u);var h=s.left+e.width()/2,v=s.top+e.height()/2,g=i.left+t.width()/2,y=i.top+t.height()/2;"isSameAsLine"===u?a.isSameAsLine(f,h,v,g,y,n,c):a.standardLine(f,h,v,g,y,n,c)},n.prototype.standardLine=function(e,t,n,r,o,a){var s=180*Math.atan2(o-n,r-t)/Math.PI+180,i=t-Math.sqrt((r-t)*(r-t)+(o-n)*(o-n))+60;a.rotateCanvas({rotate:s,x:t,y:n}).drawLine({strokeStyle:"#fff",strokeWidth:1,strokeCap:"bevel",x1:t-60,y1:n,x2:i,y2:n}),s>90&&270>s&&a.rotateCanvas({rotate:180,x:(i+t)/2,y:(n+n)/2}),e=$.trim(e).replace(/\n/g,", "),a.drawText({fillStyle:"#606060",strokeStyle:"#606060",x:(i+t+(t+60>r?-60:60))/2,y:(n+n-(t+60>r?18:-18))/2,text:e,align:"center",strokeWidth:.01,fontSize:11,fontFamily:'"Open Sans",Verdana'}).restoreCanvas().restoreCanvas(),s=Math.atan2(o-n,r-t);var d=.79,c=Math.abs(8/Math.cos(d)),l=r-60*Math.cos(s),p=o-60*Math.sin(s),u=s+Math.PI+d,f=r+Math.cos(u)*c-60*Math.cos(s),h=o+Math.sin(u)*c-60*Math.sin(s),v=s+Math.PI-d,g=r+Math.cos(v)*c-60*Math.cos(s),y=o+Math.sin(v)*c-60*Math.sin(s);a.drawLine({strokeStyle:"#fff",strokeWidth:1,x1:l,y1:p,x2:g,y2:y}),a.drawLine({strokeStyle:"#fff",strokeWidth:1,x1:l,y1:p,x2:f,y2:h})},n.prototype.isSameAsLine=function(e,t,n,r,o,a){var s=180*Math.atan2(o-n,r-t)/Math.PI+180,i=t-Math.sqrt((r-t)*(r-t)+(o-n)*(o-n))+60;a.rotateCanvas({rotate:s,x:t,y:n}).drawLine({strokeStyle:"#000",strokeWidth:1,strokeCap:"bevel",x1:t-60,y1:n,x2:i,y2:n}),s>90&&270>s&&a.rotateCanvas({rotate:180,x:(i+t)/2,y:(n+n)/2}),e=$.trim(e).replace(/\n/g,", "),a.drawText({fillStyle:"#000",strokeStyle:"#000",x:(i+t+(t+60>r?-60:60))/2,y:(n+n-(t+60>r?18:-18))/2,text:(t+60>r?" « ":"")+e+(t+60>r?"":" » "),align:"center",strokeWidth:.01,fontSize:11,fontFamily:'"Open Sans",Verdana'}).restoreCanvas().restoreCanvas(),s=Math.atan2(o-n,r-t);var d=.79,c=Math.abs(8/Math.cos(d)),l=r-60*Math.cos(s),p=o-60*Math.sin(s),u=s+Math.PI+d,f=r+Math.cos(u)*c-60*Math.cos(s),h=o+Math.sin(u)*c-60*Math.sin(s),v=s+Math.PI-d,g=r+Math.cos(v)*c-60*Math.cos(s),y=o+Math.sin(v)*c-60*Math.sin(s);a.drawLine({strokeStyle:"#000",strokeWidth:1,x1:l,y1:p,x2:g,y2:y}),a.drawLine({strokeStyle:"#000",strokeWidth:1,x1:l,y1:p,x2:f,y2:h})},n.prototype.msg=function(e,t,n,o,a){var s,i=this,d=i.container.find(".lodlive-message-container");switch(e||(e=""),t){case"init":d.length||(d=$('<div class="lodlive-message-container"></div>'),i.container.append(d));break;default:d.hide()}d.empty(),e=e.replace(/http:\/\/.+~~/g,""),e=e.replace(/nodeID:\/\/.+~~/g,""),e=e.replace(/_:\/\/.+~~/g,""),e=r.breakLines(e),e=e.replace(/\|/g,"<br />"),s=e.split(" \n "),"fullInfo"===n?(d.append('<div class="endpoint">'+o+"</div>"),2===s.length?(d.append('<div class="from upperline">'+(s[0].length>200?s[0].substring(0,200)+"...":s[0])+"</div>"),d.append('<div class="from upperline">'+s[1]+"</div>")):d.append('<div class="from upperline">'+s[0]+"</div>")):2===s.length?(d.append('<div class="from">'+s[0]+"</div>"),d.append(a?'<div class="separ inverse sprite"></div>':'<div class="separ sprite"></div>'),d.append('<div class="from">'+s[1]+"</div>")):d.append('<div class="from">'+s[0]+"</div>"),d.show()},n.prototype.errorBox=function(e){e.children(".box").addClass("errorBox"),e.children(".box").html("");var t=$('<div class="boxTitle"><span>'+r.lang("endpointNotAvailable")+"</span></div>");e.children(".box").append(t)},n.prototype.initHover=function(){var e=this;this.container.on("mouseenter mouseleave",".lodlive-docinfo label, .lodlive-docinfo a",function(t){return"mouseleave"===t.type?e.msg(null,"hide"):void e.msg($(t.target).data("title"),"show")}),this.container.on("mouseenter mouseleave",".box",function(t){if("mouseleave"===t.type)return e.msg(null,"hide");var n=$(t.target),o=n.is(".errorBox")?r.lang("endpointNotAvailableOrSLow"):n.children(".boxTitle").data("tooltip");e.msg(o,"show","fullInfo",n.parent("div").data("endpoint"))}),this.container.on("mouseenter mouseleave",".relatedBox, .groupedRelatedBox",function(t){if("mouseleave"===t.type)return e.msg(null,"hide");var n=$(t.target);e.msg(n.data("title"),"show",null,null,n.is(".inverse"))})},n.prototype.initClicks=function(e){var t=this;this.container.on("click",".actionBox",function(n){var r=$(n.target).closest(".actionBox"),o=r.closest(".lodlive-node"),a=r.data("action-handler");if(a)return a.call(r,o,e,n);switch(r.attr("rel")){case"docInfo":e.docInfo(o);break;case"tools":t.generateTools(r,o,e).fadeToggle("fast")}}),this.container.on("click",".relatedBox",function(t){var n=$(t.target),r=n.closest(".lodlive-node");n.addClass("exploded"),e.addNewDoc(r,n)}),this.container.on("click",".groupedRelatedBox",function(t){var n=$(t.target),r=n.closest(".lodlive-node");n.data("show")?(n.data("show",!1),e.docInfo(),n.removeClass("lastClick"),r.find("."+n.attr("rel")).fadeOut("fast"),n.fadeTo("fast",1),r.children(".innerPage").hide()):(n.data("show",!0),r.children(".innerPage").show(),e.docInfo(),r.find(".lastClick").removeClass("lastClick").click(),n.addClass("lastClick"),r.find("."+n.attr("rel")+":not([class*=exploded])").fadeIn("fast"),n.fadeTo("fast",.3))}),this.container.on("click",".llpages",function(e){var t=$(e.target),n="."+t.data("page");t.siblings(".lastClick").removeClass("lastClick").click(),t.parent().fadeOut("fast",null,function(){$(this).parent().children(n).fadeIn("fast")})})},n.prototype.init=function(t,n){var r=this;if("string"==typeof n&&(n=$(n)),!n.length)throw new Error("LodLive: no container found");this.container=n.css("position","relative"),this.context=$('<div class="lodlive-graph-context"></div>');var o=$('<div class="lodlive-graph-container"></div>');this.context.appendTo(this.container).wrap(o);var a=e("./draggable.js");a(this.container,this.context,".lodlive-node",function(e){return r.reDrawLines(e.target)}),this.initHover(),this.initClicks(t)};var i={create:function(e){return new n(e)}};t.exports=i,window.LodLiveRenderer||(window.LodLiveRenderer=n),window.rendererFactory||(window.rendererFactory=i)},{"./draggable.js":2,"./ref-store.js":4,"./utils.js":7}],6:[function(e,t){"use strict";function n(e){var t={uris:[],bnodes:[],values:[]};return $.each(e,function(e,n){var r={};r[n.property.value]=n.object.value,"uri"===n.object.type?t.uris.push(r):"bnode"===n.object.type?t.bnodes.push(r):t.values.push(r)}),t}function r(e,t){return this instanceof r?(this.httpClient=e.create(t.connection),void(this.getQueryTemplate=function(e){return t.queries&&t.queries[e]?t.queries[e]:o[e]})):new r(e,t)}var o={documentUri:"SELECT DISTINCT * WHERE {<{URI}> ?property ?object} ORDER BY ?property",document:"SELECT DISTINCT * WHERE {<{URI}> ?property ?object}",bnode:"SELECT DISTINCT *  WHERE {<{URI}> ?property ?object}",inverse:"SELECT DISTINCT * WHERE {?object ?property <{URI}>.} LIMIT 100",inverseSameAs:"SELECT DISTINCT * WHERE {{?object <http://www.w3.org/2002/07/owl#sameAs> <{URI}> } UNION { ?object <http://www.w3.org/2004/02/skos/core#exactMatch> <{URI}>}}"};r.prototype.getQuery=function(e,t){return this.getQueryTemplate(e).replace(/\{URI\}/gi,t.replace(/^.*~~/,""))},r.prototype.document=function(e,t){var r="document",o=this.getQuery(r,e);return this.httpClient({query:o},{beforeSend:t.beforeSend,error:t.error,success:function(e){return e&&e.results&&e.results.bindings?void t.success(n(e.results.bindings)):(console.error(e),t.error(new Error("malformed results")))}})},r.prototype.bnode=function(e,t){var r="bnode",o=this.getQuery(r,e);return this.httpClient({query:o},{beforeSend:t.beforeSend,error:t.error,success:function(e){return e&&e.results&&e.results.bindings?void t.success(n(e.results.bindings)):(console.error(e),t.error(new Error("malformed results")))}})},r.prototype.documentUri=function(e,t){var r="documentUri",o=this.getQuery(r,e);return this.httpClient({query:o},{beforeSend:t.beforeSend,error:t.error,success:function(e){return e&&e.results&&e.results.bindings?void t.success(n(e.results.bindings)):(console.error(e),t.error(new Error("malformed results")))}})},r.prototype.inverse=function(e,t){var r="inverse",o=this.getQuery(r,e);return this.httpClient({query:o},{beforeSend:t.beforeSend,error:t.error,success:function(e){return e&&e.results&&e.results.bindings?void t.success(n(e.results.bindings)):(console.error(e),t.error(new Error("malformed results")))}})},r.prototype.inverseSameAs=function(e,t){var n="inverseSameAs",r=this.getQuery(n,e);return this.httpClient({query:r},t)};var a={create:function(e,t){return new r(e,t)}};t.exports=a,window.sparqlClientFactory||(window.sparqlClientFactory=a)},{}],7:[function(e,t){"use strict";function n(e,t){c[e]=t}function r(e){c["default"]=c[e]||c["default"]
}function o(e,t){var n=t?c[t]||c["default"]:c["default"];return n&&n[e]||e}function a(e){return e=e.replace(/\//g,'/<span style="font-size:1px"> </span>'),e=e.replace(/&/g,'&<span style="font-size:1px"> </span>'),e=e.replace(/%/g,'%<span style="font-size:1px"> </span>')}function s(e){if(!e)return e;for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function i(e){e=jQuery.trim(e);var t=e.lastIndexOf("/"),n=e.lastIndexOf("#");return e.substring(t>n?t+1:n+1)}function d(e,t,n,r,o,a){var s=[],i=0;if(a){i=a;var d=2*Math.PI*(i/t);s.push([n+e*Math.cos(d),r+e*Math.sin(d)])}else for(;t>i;i++){var d=2*Math.PI*(i/t);s.push([n+e*Math.cos(d),r+e*Math.sin(d)])}return s}var c={},l={registerTranslation:n,setDefaultTranslation:r,lang:o,breakLines:a,hashFunc:s,shortenKey:i,circleChords:d};t.exports=l,window.LodLiveUtils||(window.LodLiveUtils=l)},{}]},{},[1]);